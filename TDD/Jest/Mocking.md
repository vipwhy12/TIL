## Mocking이란?

Jest에서 가장 많이 사용되는 기능 중 하나로 테스트할 때 실제 객체 대신에 테스트용으로만든 가짜 객체를 사용하는 것을 의미한다. Moking을 사용하면 테스트에서 의존성을 제거하고 코드를 격리시켜서 테스트를 더 쉽고 빠르게 수행할 수 있다. 따라서 Mocking은 테스트의 효율성과 신뢰성을 높이는 데 유용한 기술이다. 결론적으로, mocking을 이용하면 실제 객체를 사용하는 것보다 훨씬 가볍고 빠르게 실행되면서도, 항상 동일한 결과를 내는 테스트를 작성할 수 있습니다.

## Mocking의 목적

1.  의존성이 있는 코드의 동작을 검증하고자 할 때 사용한다.
2.  의존성을 가진 코드와 독립적으로 테스트를 수행할 수 있다.
3.  다양한 시나리오를 쉽게 테스트 할 수 있다.

## Mocking이 왜 필요할까?

    💡 데이터베이스에서 데이터를 삭제하는 코드에 대한 단위 테스트를 작성할 때, 실제 데이터베이스를 사용한다면 여러 가지 문제점이 발생할 수 있습니다.

- 데이테베이스 접속과 같이 Network이나 I/O 작업이 포함된 테스트는 실행 속도가 현저히 떨어질 수 밖에 없습니다.
- 프로젝트의 규모가 켜져서 한 번에 실행해야 할 테스트 케이스가 많이지면 이러한 작은 속도 저하들이 모여 큰 이슈가 될 수 있으며, CI/CD 파이프라인의 일부로 테스트가 자동화되어 자주 실행되야 한다면 더 큰 문제가 될 수 있습니다.
- 테스트 자체를 위한 코드보다 데이터베이스와 연결을 맺고 트랜잭션을 생성하고 쿼리를 전송하는 코드가 더 길어질 수 있습니다. 즉, 배보다 배꼽이 더 커질 수 있습니다.
- 만약 테스트 실행 순간 일시적으로 데이터베이스가 오프라인 작업 중이었다면 해당 테스트는 실패하게 됩니다. 따라서 테스트가 인프라 환경에 영향을 받게됩니다. (non-deterministic)
- 테스트가 종료 직 후, 데이터베이스에서 변경 데이터를 직접 원복하거나 트렌잭션을 rollback 해줘야 하는데 상당히 번거로운 작업이 될 수 있습니다.

  무엇보다 이런 방식으로 테스트를 작성하게 되면 특정 기능만 분리해서 테스트하겠다는 단위 테스트(Unit Test)의 근본적인 사상에 부합하지 않게 됩니다.

## 의존성 있는 코드란?

특정 코드 또는 모듈이 다른 코드 또는 모듈에 의존하여 동작하는 경우를 말한다.

    ex) 데이터베이스에 접근하는 코드, 외부 API를 호출하는 코드, 파일을 읽고 쓰는 코드 등은 모두 외부에 의존성이 있는 코드이다. 이러한 코드를 테스트할 때, 실제 데이터베이스나 외부 API를 사용하여 테스트를 수행하게 되면 테스트가 실패하거나, 실행시간이 느려지거나, 테스트 데이터를 준비하기 어려운 등의 여러가지 문제가 발생할 수 있다.

따라서 mocking을 통해 가짜 객체를 만들어 사용하면 테스트를 보다 쉽게 수행할 수 있다. mock 객체는 실제 의존성이 있는 코드와 비슷한 동작을 수행하면서도 외부 의존성을 대체하여 테스트를 수행하는 것이다.
